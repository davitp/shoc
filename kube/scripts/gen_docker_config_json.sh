#!/bin/bash

SERVER=${SHOC_PUBLIC_REGISTRY}
USERNAME=${SHOC_PUBLIC_REGISTRY_USERNAME}
PASSWORD=${SHOC_PUBLIC_REGISTRY_PASSWORD}
EMAIL=${SHOC_PUBLIC_REGISTRY_EMAIL}

AUTH_ENCODED=$(echo "$USERNAME:$PASSWORD" | base64 | tr -d '\n')
CONFIG_PLAIN=$(echo "{\"auths\": {\"$SERVER\":{\"username\":\"$USERNAME\",\"password\":\"$PASSWORD\",\"email\":\"$EMAIL\",\"auth\":\"$AUTH_ENCODED\"}}}")
CONFIG_ENCODED=$(echo $CONFIG_PLAIN | base64 | tr -d '\n')

echo $CONFIG_ENCODED
